<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bula de Julio II por la que se crea las US en 1505</title>


<link rel="stylesheet" href="css/style.css">

</head>
<body>


<div id="container">
  <div id="img-wrapper">
    <img id="bula-img" src="images/bula1505us.jpg" alt="Bula de 1505" draggable="false" />

<div class="renglon r0" id="renglon-0" style="left:7.32%; top:7.5%; width:72.74%; height:6%;"></div>
<div class="numero" id="numero-0" style="left:7.32%; top:8.10%;" onclick="toggleNumero(0)">0</div>

<!---Creado manualmente-->    

<div class="renglon r1" id="renglon-1" style="left:11.39%; top:17.3%; width:75.92%; height:0.90%;"></div>
<div class="numero" id="numero-1" style="left:11.39%; top:17.40%;" onclick="toggleNumero(1)">1</div>

<div class="renglon r2" id="renglon-2" style="left:11.39%; top:18.5%; width:75.92%; height:0.90%;"></div>
<div class="numero" id="numero-2" style="left:11.39%; top:18.60%;" onclick="toggleNumero(2)">2</div>

<div class="renglon r3" id="renglon-3" style="left:11.39%; top:19.6%; width:75.92%; height:0.90%;"></div>
<div class="numero" id="numero-3" style="left:11.39%; top:19.70%;" onclick="toggleNumero(3)">3</div>

<div class="renglon r4" id="renglon-4" style="left:11.39%; top:20.8%; width:75.92%; height:0.90%;"></div>
<div class="numero" id="numero-4" style="left:11.39%; top:20.90%;" onclick="toggleNumero(4)">4</div>

<!---Generado automáticamente-->

<div class="renglon r5" id="renglon-5" style="left:11.39%; top:22.0%; width:75.92%; height:0.90%;"></div>
<div class="numero" id="numero-5" style="left:11.39%; top:22.10%;" onclick="toggleNumero(5)">5</div>

<div class="renglon r6" id="renglon-6" style="left:11.39%; top:23.30%; width:75.92%; height:0.90%;"></div>
<div class="numero" id="numero-6" style="left:11.39%; top:23.30%;" onclick="toggleNumero(6)">6</div>

<div class="renglon r7" id="renglon-7" style="left:11.39%; top:24.50%; width:75.92%; height:0.90%;"></div>
<div class="numero" id="numero-7" style="left:11.39%; top:24.50%;" onclick="toggleNumero(7)">7</div>

<div class="renglon r8" id="renglon-8" style="left:11.39%; top:25.70%; width:75.92%; height:0.90%;"></div>
<div class="numero" id="numero-8" style="left:11.39%; top:25.70%;" onclick="toggleNumero(8)">8</div>

<div class="renglon r9" id="renglon-9" style="left:11.39%; top:26.90%; width:75.92%; height:0.90%;"></div>
<div class="numero" id="numero-9" style="left:11.39%; top:26.90%;" onclick="toggleNumero(9)">9</div>

<div class="renglon r10" id="renglon-10" style="left:12%; top:28%; width:75.92%; height:0.90%;"></div>
<div class="numero" id="numero-10" style="left:12%; top:28%;" onclick="toggleNumero(10)">10</div>

<div class="renglon r11" id="renglon-11" style="left:12%; top:29.3%; width:75.92%; height:0.90%;"></div>
<div class="numero" id="numero-11" style="left:12%; top:29.3%;" onclick="toggleNumero(11)">11</div>

<div class="renglon r12" id="renglon-12" style="left:12%; top:30.43%; width:75.92%; height:0.90%;"></div>
<div class="numero" id="numero-12" style="left:12%; top:30.43%;" onclick="toggleNumero(12)">12</div>

<div class="renglon r13" id="renglon-13" style="left:12%; top:31.56%; width:75.92%; height:0.90%;"></div>
<div class="numero" id="numero-13" style="left:12%; top:31.56%;" onclick="toggleNumero(13)">13</div>

<div class="renglon r14" id="renglon-14" style="left:12%; top:32.69%; width:75.92%; height:0.90%;"></div>
<div class="numero" id="numero-14" style="left:12%; top:32.69%;" onclick="toggleNumero(14)">14</div>

<div class="renglon r15" id="renglon-15" style="left:12%; top:33.82%; width:75.92%; height:0.90%;"></div>
<div class="numero" id="numero-15" style="left:12%; top:33.82%;" onclick="toggleNumero(15)">15</div>

<div class="renglon r16" id="renglon-16" style="left:12%; top:34.95%; width:75.92%; height:0.90%;"></div>
<div class="numero" id="numero-16" style="left:12%; top:34.95%;" onclick="toggleNumero(16)">16</div>

<div class="renglon r17" id="renglon-17" style="left:12%; top:36.08%; width:75.92%; height:0.90%;"></div>
<div class="numero" id="numero-17" style="left:12%; top:36.08%;" onclick="toggleNumero(17)">17</div>

<div class="renglon r18" id="renglon-18" style="left:12%; top:37.21%; width:75.92%; height:0.90%;"></div>
<div class="numero" id="numero-18" style="left:12%; top:37.21%;" onclick="toggleNumero(18)">18</div>

<div class="renglon r19" id="renglon-19" style="left:12%; top:38.34%; width:75.92%; height:0.90%;"></div>
<div class="numero" id="numero-19" style="left:12%; top:38.34%;" onclick="toggleNumero(19)">19</div>

<div class="renglon r20" id="renglon-20" style="left:12%; top:39.46%; width:75.92%; height:0.90%;"></div>
<div class="numero" id="numero-20" style="left:12%; top:39.46%;" onclick="toggleNumero(20)">20</div>

<div class="renglon r21" id="renglon-21" style="left:12%; top:40.59%; width:75.92%; height:0.90%;"></div>
<div class="numero" id="numero-21" style="left:12%; top:40.59%;" onclick="toggleNumero(21)">21</div>

<div class="renglon r22" id="renglon-22" style="left:12%; top:41.72%; width:75.92%; height:0.90%;"></div>
<div class="numero" id="numero-22" style="left:12%; top:41.72%;" onclick="toggleNumero(22)">22</div>

<div class="renglon r23" id="renglon-23" style="left:12%; top:42.85%; width:75.92%; height:0.90%;"></div>
<div class="numero" id="numero-23" style="left:12%; top:42.85%;" onclick="toggleNumero(23)">23</div>

<div class="renglon r24" id="renglon-24" style="left:12%; top:43.98%; width:75.92%; height:0.90%;"></div>
<div class="numero" id="numero-24" style="left:12%; top:43.98%;" onclick="toggleNumero(24)">24</div>

<div class="renglon r25" id="renglon-25" style="left:12%; top:45.11%; width:75.92%; height:0.90%;"></div>
<div class="numero" id="numero-25" style="left:12%; top:45.11%;" onclick="toggleNumero(25)">25</div>

<div class="renglon r26" id="renglon-26" style="left:12%; top:46.24%; width:75.92%; height:0.90%;"></div>
<div class="numero" id="numero-26" style="left:12%; top:46.24%;" onclick="toggleNumero(26)">26</div>

<div class="renglon r27" id="renglon-27" style="left:12%; top:47.37%; width:75.92%; height:0.90%;"></div>
<div class="numero" id="numero-27" style="left:12%; top:47.37%;" onclick="toggleNumero(27)">27</div>

<div class="renglon r28" id="renglon-28" style="left:12%; top:48.5%; width:75.92%; height:0.90%;"></div>
<div class="numero" id="numero-28" style="left:12%; top:48.5%;" onclick="toggleNumero(28)">28</div>

<div class="renglon r29" id="renglon-29" style="left:12%; top:49.63%; width:75.92%; height:0.90%;"></div>
<div class="numero" id="numero-29" style="left:12%; top:49.63%;" onclick="toggleNumero(29)">29</div>

<div class="renglon r30" id="renglon-30" style="left:12%; top:50.76%; width:75.92%; height:0.90%;"></div>
<div class="numero" id="numero-30" style="left:12%; top:50.76%;" onclick="toggleNumero(30)">30</div>

<div class="renglon r31" id="renglon-31" style="left:12%; top:51.89%; width:75.92%; height:0.90%;"></div>
<div class="numero" id="numero-31" style="left:12%; top:51.89%;" onclick="toggleNumero(31)">31</div>

<div class="renglon r32" id="renglon-32" style="left:12%; top:53.02%; width:75.92%; height:0.90%;"></div>
<div class="numero" id="numero-32" style="left:12%; top:53.02%;" onclick="toggleNumero(32)">32</div>

<div class="renglon r33" id="renglon-33" style="left:12%; top:54.15%; width:75.92%; height:0.90%;"></div>
<div class="numero" id="numero-33" style="left:12%; top:54.15%;" onclick="toggleNumero(33)">33</div>

<div class="renglon r34" id="renglon-34" style="left:12%; top:55.28%; width:75.92%; height:0.90%;"></div>
<div class="numero" id="numero-34" style="left:12%; top:55.28%;" onclick="toggleNumero(34)">34</div>

<div class="renglon r35" id="renglon-35" style="left:12%; top:56.41%; width:75.92%; height:0.90%;"></div>
<div class="numero" id="numero-35" style="left:12%; top:56.41%;" onclick="toggleNumero(35)">35</div>

<div class="renglon r36" id="renglon-36" style="left:12%; top:57.54%; width:75.92%; height:0.90%;"></div>
<div class="numero" id="numero-36" style="left:12%; top:57.54%;" onclick="toggleNumero(36)">36</div>

<div class="renglon r37" id="renglon-37" style="left:12%; top:58.66%; width:75.92%; height:0.90%;"></div>
<div class="numero" id="numero-37" style="left:12%; top:58.66%;" onclick="toggleNumero(37)">37</div>

<div class="renglon r38" id="renglon-38" style="left:12%; top:59.79%; width:75.92%; height:0.90%;"></div>
<div class="numero" id="numero-38" style="left:12%; top:59.79%;" onclick="toggleNumero(38)">38</div>

<div class="renglon r39" id="renglon-39" style="left:12%; top:60.92%; width:75.92%; height:0.90%;"></div>
<div class="numero" id="numero-39" style="left:12%; top:60.92%;" onclick="toggleNumero(39)">39</div>

<div class="renglon r40" id="renglon-40" style="left:12%; top:62.05%; width:75.92%; height:0.90%;"></div>
<div class="numero" id="numero-40" style="left:12%; top:62.05%;" onclick="toggleNumero(40)">40</div>

<div class="renglon r41" id="renglon-41" style="left:12%; top:63.18%; width:75.92%; height:0.90%;"></div>
<div class="numero" id="numero-41" style="left:12%; top:63.18%;" onclick="toggleNumero(41)">41</div>

<div class="renglon r42" id="renglon-42" style="left:12%; top:64.31%; width:75.92%; height:0.90%;"></div>
<div class="numero" id="numero-42" style="left:12%; top:64.31%;" onclick="toggleNumero(42)">42</div>

<div class="renglon r43" id="renglon-43" style="left:12%; top:65.44%; width:75.92%; height:0.90%;"></div>
<div class="numero" id="numero-43" style="left:12%; top:65.44%;" onclick="toggleNumero(43)">43</div>

<div class="renglon r44" id="renglon-44" style="left:12%; top:66.57%; width:75.92%; height:0.90%;"></div>
<div class="numero" id="numero-44" style="left:12%; top:66.57%;" onclick="toggleNumero(44)">44</div>

<div class="renglon r45" id="renglon-45" style="left:12%; top:67.7%; width:75.92%; height:0.90%;"></div>
<div class="numero" id="numero-45" style="left:12%; top:67.7%;" onclick="toggleNumero(45)">45</div>

  </div>
</div>

<script src="js/zoom.js"></script>

<script src="js/renglones.js"></script>

<script>
  // Guardamos los estados de cada línea (inicialmente todos en 0)
  const estados = {};


  function toggleNumero(linea) {
  if (estados[linea] === undefined) {
    estados[linea] = 0;
  }

  const renglon = document.getElementById(`renglon-${linea}`);
  const numero = document.getElementById(`numero-${linea}`);
  const estadoActual = estados[linea];

  if (estadoActual === 0) {
    // Estado 0: Mostrar LATÍN
    const [fontSize, maxWidth, texto, padding] = contenidosLATIN[linea];
    renglon.innerHTML= texto || '';
    renglon.style.fontSize = fontSize;
    renglon.style.maxWidth = maxWidth;
    renglon.style.padding = padding;
    renglon.style.width = '100%';
    renglon.style.height = 'auto';
    renglon.style.opacity = '0.9';
    renglon.style.pointerEvents = 'auto';
    renglon.style.whiteSpace = 'normal';
    renglon.style.textAlign = 'justify';
    renglon.style.fontStyle = 'italic';
    renglon.style.background = 'linear-gradient(to bottom, rgba(255,255,255,0.3), rgba(255,255,255,0.7) 50%, rgba(255,255,255,0.3))';
    numero.style.background = 'yellow';
    numero.style.color = 'grey';
    
  } else if (estadoActual === 1) {
    // Estado 1: Mostrar ESPAÑOL
    const [fontSize, maxWidth, texto, padding] = contenidosES[linea];
    renglon.innerHTML = texto || '';
    renglon.style.fontSize = fontSize;
    renglon.style.maxWidth = maxWidth;
    renglon.style.padding = padding;
    renglon.style.width = '100%';
    renglon.style.height = 'auto';
    renglon.style.opacity = '0.9';
    renglon.style.pointerEvents = 'auto';
    renglon.style.whiteSpace = 'normal';
    renglon.style.textAlign = 'justify';
    renglon.style.fontStyle = 'normal';
    renglon.style.background = 'linear-gradient(to bottom, rgba(255,255,255,0.3), rgba(255,255,255,0.7) 50%, rgba(255,255,255,0.3))';
    numero.style.background = 'red';
    numero.style.color = 'yellow';
  } else {
    // Estado 2: Limpiar
    renglon.textContent = '';
    renglon.style.height = '0.90%';
    renglon.style.opacity = '0';
    renglon.style.background = 'transparent';
    renglon.style.pointerEvents = 'none';
    renglon.style.whiteSpace = 'normal';
    renglon.style.textAlign = 'left';
    renglon.style.width = '75.92%';
    renglon.style.maxWidth = '76%';
    renglon.style.fontSize = '0.8rem';
    renglon.style.fontStyle = 'normal';
    numero.style.background = '#cccccc';
    numero.style.color = '#333';
  }

  // Avanzar al siguiente estado (0 → 1 → 2 → 0 → ...)
  estados[linea] = (estadoActual + 1) % 3;
}

function todosLatin() {
  for (let linea = 0; linea <= 45; linea++) {
    estados[linea] = 0;          // forzamos el estado a 0 para que toggleNumero lo pase a 1
    toggleNumero(linea);         // mostramos el LATÍN (primera pulsación)
    estados[linea] = 1;           // aseguramos que queda en estado 1
  }
}

function todosES() {
  for (let linea = 0; linea <= 45; linea++) {
    estados[linea] = 0;         
    toggleNumero(linea);         
    toggleNumero(linea);
    estados[linea] = 2;           
  }
}

function todosReset() {
  for (let linea = 0; linea <= 45; linea++) {
    estados[linea] = 0;

    const renglon = document.getElementById(`renglon-${linea}`);
    const numero = document.getElementById(`numero-${linea}`);
    
    renglon.textContent = '';
    renglon.style.height = '0.90%';
    renglon.style.opacity = '0';
    renglon.style.background = 'transparent';
    renglon.style.pointerEvents = 'none';
    renglon.style.whiteSpace = 'normal';
    renglon.style.textAlign = 'left';
    renglon.style.width = '75.92%';
    renglon.style.maxWidth = '76%';
    renglon.style.fontSize = '0.8rem';
    renglon.style.fontStyle = 'normal';

    numero.style.background = '#cccccc';
    numero.style.color = '#333';
  }
}

function ocultarNumeros(){
    // Ocultar todos los números
    const numeros = document.querySelectorAll('.numero');
  numeros.forEach(numero => {
    numero.style.visibility = 'hidden';
  });
}

function mostrarNumeros(){
  const numeros = document.querySelectorAll('.numero');
  numeros.forEach(numero => {
    numero.style.visibility = 'visible';
  });
}

function mostrarOcultarNum() {
  const numeros = document.querySelectorAll('.numero');
  if (numeros.length === 0) return;

  // Miramos el primer número para decidir
  const visible = numeros[0].style.visibility !== 'hidden';

  if (visible) {
    ocultarNumeros();
  } else {
    mostrarNumeros();
  }
}


ocultarNumeros();

function resetPage() {
  resetZoom();
  todosReset();
  ocultarNumeros();
}

let audioPlayer = null;

function playMp3(src) {
  if (audioPlayer) {
    audioPlayer.pause();
    audioPlayer.currentTime = 0;
  }
  audioPlayer = new Audio(src);
  audioPlayer.play();
}

</script>

<div id="zoom-controls">
  <img src="images/zoom-in.png" alt="Acercar" onclick="zoomIn()" class="zoom-button">
  <img src="images/zoom-out.png" alt="Alejar" onclick="zoomOut()" class="zoom-button">
  <img src="images/reset.png" alt="Reset" onclick="resetPage()" class="zoom-button"> 
</div>

<div id="bula-controls">
  <img src="images/num-list.png" alt="numerado" onclick="mostrarOcultarNum()" class="bula-button">
  <img src="images/speaker.png" alt="Escucha la Bula" onclick="playMp3('./files/bula1505es.mp3')" class="bula-button">
  <img src="images/flag-spain-BW.png" alt="spanish" onclick="todosES()" class="bula-button">
  <img src="images/flag-vatican-BW.png" alt="latin" onclick="todosLatin()" class="bula-button">
  <img src="images/info.png" alt="info" onclick="abrirModal()" class="bula-button">
  <img src="images/reset.png" alt="Reset" onclick="resetPage()" class="bula-button"> 
</div>

<!-- Modal -->
<div id="miModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background-color:rgba(0,0,0,0.5);">
  <div style="position:relative; width:80%; height:80%; margin:5% auto; background:white; padding:10px;">
    <span style="position:absolute; top:10px; right:20px; font-size:30px; cursor:pointer;" onclick="cerrarModal()">×</span>
    <iframe src="" id="contenidoModal" style="width:100%; height:90%; border:none;"></iframe>
  </div>
</div>



<script src="js/modal.js" type="text/javascript"></script>
<script src="js/dragToPan.js" type="text/javascript"></script>



</body>
</html>
